<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.team3.mapper.NoticeBoardMapper">

    <select id="selectNoticeBoardList" parameterType="String"
            resultType="com.team3.domain.NoticeBoard">
        SELECT
            TABLE_NO,
            TITLE,
            USER_ID,
            DATE
        FROM
            notice_table
        <if test="query != null and query.length() > 0">
            WHERE TITLE LIKE CONCAT('%', CONCAT(#{query}, '%'))
        </if>
        ORDER BY TABLE_NO DESC
    </select>

    <select id="selectNoticeBoard" parameterType="BigInteger"
            resultType="com.team3.domain.NoticeBoard">
        SELECT
            TABLE_NO,
            TITLE,
            CONTENT,
            USER_ID,
            DATE
        FROM
            notice_table
        WHERE TABLE_NO = #{tableNo}
    </select>

    <insert id="insertNoticeBoard" parameterType="com.team3.domain.NoticeBoard">
            INSERT INTO notice_table
            VALUES (
                        NULL,
                        #{userNo},
                        #{userId},
                        #{title},
                        #{content},
                        Now()
                   )
    </insert>

    <update id="updateNoticeBoard" parameterType="com.team3.domain.NoticeBoard">
        UPDATE notice_table
        SET
            TITLE = #{title},
            CONTENT = #{content}
        WHERE TABLE_NO = #{tableNo}
    </update>

    <delete id="deleteNoticeBoard" parameterType="BigInteger">
        DELETE FROM notice_table
        WHERE TABLE_NO = #{tableNo}
    </delete>

</mapper>